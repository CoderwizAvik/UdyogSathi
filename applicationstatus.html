<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UdyogSathi | Application Status</title>
    
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        // --- Tailwind Configuration (Dark Theme) ---
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bg-darkest': '#0D1117', // GitHub Dark Theme BG
                        'bg-medium': '#161B22',  // Main Body Background
                        'bg-light': '#21262D',   // Form Card Background
                        'text-light': '#F0F6FC', // Primary Text Color
                        'accent-blue': '#58A6FF', // Bright Blue Accent
                        'success-green': '#3FB950', // Success
                        'fail-red': '#F85149', // Failure/Rejected
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }

        // --- Mock Data Store (Simulates Database) ---
        const mockApplications = {
            "UDYOG-1004": {
                role: "Housekeeping / Maid",
                employer: "Priya Sharma (Residential)",
                status: "Application Submitted",
                steps: ["Applied", "Reviewing", "Interview Scheduled", "Offer/Reject"],
                currentStepIndex: 0,
            },
            "UDYOG-1003": {
                role: "Construction Helper (Labour)",
                employer: "City Builders Ltd.",
                status: "Under Review",
                steps: ["Applied", "Reviewing", "Interview Scheduled", "Offer/Reject"],
                currentStepIndex: 1,
            },
            "UDYOG-1001": {
                role: "Delivery Driver",
                employer: "QuickMove Logistics",
                status: "Interview Scheduled",
                steps: ["Applied", "Reviewing", "Interview Scheduled", "Offer/Reject"],
                currentStepIndex: 2,
                interviewDetails: "Date: 10th November 2025 | Time: 10:00 AM | Location: 45/A Industrial Area, Gate 3",
            },
            "UDYOG-1002": {
                role: "Security Guard (Night Shift)",
                employer: "Guardian Services",
                status: "Application Rejected",
                steps: ["Applied", "Reviewing", "Interview Scheduled", "Offer/Reject"],
                currentStepIndex: 3,
                reason: "Role filled by an internal transfer. Thank you for your interest.",
                isRejected: true,
            },
        };

        /**
         * Clears the display area, removing all previous content.
         */
        const clearResults = () => {
            const resultDiv = document.getElementById('statusResult');
            resultDiv.innerHTML = '';
            document.getElementById('statusMessage').textContent = 'Enter your Application ID above to check its current status.';
            document.getElementById('statusMessage').classList.remove('text-success-green', 'text-fail-red', 'text-accent-blue');
            document.getElementById('statusMessage').classList.add('text-gray-400');
        };


        /**
         * Handles the search logic for the application status.
         */
        const checkStatus = () => {
            const inputField = document.getElementById('applicationIdInput');
            const appId = inputField.value.trim().toUpperCase();
            const application = mockApplications[appId];
            const resultDiv = document.getElementById('statusResult');
            const statusMsg = document.getElementById('statusMessage');

            // 1. Reset state
            clearResults();
            
            // 2. Input Validation
            if (!appId) {
                statusMsg.textContent = 'Please enter a valid Application ID.';
                statusMsg.classList.remove('text-gray-400');
                statusMsg.classList.add('text-fail-red');
                return;
            }

            // 3. Application Found
            if (application) {
                statusMsg.textContent = `Status for ID: ${appId}`;
                statusMsg.classList.remove('text-gray-400', 'text-fail-red');

                // Determine overall result color
                const statusColor = application.isRejected ? 'text-fail-red' : 'text-success-green';
                statusMsg.classList.add(statusColor);

                // Build the HTML result display
                resultDiv.innerHTML = `
                    <div class="space-y-4 mb-8 p-4 rounded-lg border border-gray-700 bg-bg-medium shadow-md">
                        <p class="text-gray-400">Role Applied For:</p>
                        <p class="text-2xl font-semibold text-text-light">${application.role}</p>
                        <p class="text-gray-400">Employer:</p>
                        <p class="text-lg text-text-light">${application.employer}</p>
                        <p class="text-gray-400">Current Status:</p>
                        <span class="inline-block px-3 py-1 text-sm font-bold rounded-full ${application.isRejected ? 'bg-fail-red text-white' : 'bg-success-green text-bg-darkest'}">
                            ${application.status}
                        </span>
                    </div>

                    ${renderTimeline(application)}
                    
                    ${application.interviewDetails ? `
                        <div class="mt-6 p-4 bg-accent-blue/20 border border-accent-blue rounded-lg shadow-inner">
                            <p class="font-bold text-accent-blue flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15h2v-6h-2v6zm0-8h2V7h-2v2z"/>
                                </svg>
                                Interview Details
                            </p>
                            <p class="mt-2 text-gray-200">${application.interviewDetails}</p>
                        </div>
                    ` : ''}

                    ${application.reason ? `
                        <div class="mt-6 p-4 bg-fail-red/20 border border-fail-red rounded-lg shadow-inner">
                            <p class="font-bold text-fail-red flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15h2v-2h-2v2zm0-4h2V7h-2v6z"/>
                                </svg>
                                Rejection Reason
                            </p>
                            <p class="mt-2 text-gray-200">${application.reason}</p>
                        </div>
                    ` : ''}
                `;
            } 
            // 4. Application Not Found
            else {
                statusMsg.textContent = `Error: Application ID "${appId}" not found. Please check the number and try again.`;
                statusMsg.classList.remove('text-gray-400');
                statusMsg.classList.add('text-fail-red');
            }
        };

        /**
         * Renders the visual progress timeline based on application data.
         * @param {Object} application - The application data object.
         * @returns {string} HTML for the timeline.
         */
        const renderTimeline = (application) => {
            let timelineHtml = '<div class="mt-10 mb-8">';
            timelineHtml += '<h3 class="text-xl font-semibold mb-6 text-text-light">Application Progress</h3>';
            
            application.steps.forEach((step, index) => {
                const isActive = index <= application.currentStepIndex;
                const isCurrent = index === application.currentStepIndex;
                const isRejected = application.isRejected && index === (application.steps.length - 1);
                
                let stepClass = 'border-gray-600 text-gray-500'; // Default
                let iconClass = 'bg-gray-700 text-gray-400'; // Default icon style
                let lineClass = 'bg-gray-600'; // Default line style

                if (isActive && !isRejected) {
                    stepClass = 'font-semibold text-text-light';
                    iconClass = 'bg-accent-blue text-white shadow-lg shadow-accent-blue/50';
                }
                if (isRejected && isCurrent) {
                    stepClass = 'font-semibold text-fail-red';
                    iconClass = 'bg-fail-red text-white shadow-lg shadow-fail-red/50';
                    lineClass = 'bg-fail-red';
                }
                
                // Override active line class for steps before the current one
                if (index < application.currentStepIndex && !application.isRejected) {
                    lineClass = 'bg-success-green';
                }

                // Start of Timeline Item
                timelineHtml += `
                    <div class="flex">
                        <div class="flex flex-col items-center mr-4">
                            <!-- Step Dot/Icon -->
                            <div class="w-8 h-8 rounded-full flex items-center justify-center transition-all duration-500 ${iconClass}">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor">
                                    ${isActive ? '<path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/>' : '<circle cx="12" cy="12" r="3"/>'}
                                </svg>
                            </div>
                            <!-- Connector Line (Only if not the last item) -->
                            ${index < application.steps.length - 1 ? `<div class="w-1 h-full ${lineClass} transition-all duration-500"></div>` : ''}
                        </div>
                        
                        <!-- Step Content -->
                        <div class="pb-8 pt-1 flex-grow">
                            <p class="text-lg ${stepClass} transition-colors duration-500">${step}</p>
                            ${isCurrent && !application.isRejected ? 
                                `<p class="text-sm text-accent-blue font-medium mt-1">Currently at this stage</p>` : ''}
                            ${isRejected && isCurrent ?
                                `<p class="text-sm text-fail-red font-medium mt-1">Status Finalized</p>` : ''}
                        </div>
                    </div>
                `;
            });

            timelineHtml += '</div>';
            return timelineHtml;
        };


        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            // Set up event listener for button click
            document.getElementById('checkStatusButton').addEventListener('click', checkStatus);
            
            // Allow checking status by pressing Enter key in the input field
            document.getElementById('applicationIdInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    checkStatus();
                }
            });
            
            // Initialize status message
            clearResults();
        });

    </script>

    <style>
        /* Custom styles for the dark theme and smooth transitions */
        body {
            background-color: #161B22; /* bg-medium */
            font-family: 'Inter', sans-serif;
        }
        .status-container {
            background-color: #21262D; /* bg-light */
            border-radius: 1.5rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4); 
            border: 1px solid #30363D; /* Subtle border */
        }
        input[type="text"] {
            background-color: #2D333B; /* Slightly lighter input background */
            color: #F0F6FC; /* Light text */
            border: 1px solid #484F58;
            transition: all 0.3s ease;
        }
        input[type="text"]:focus {
            border-color: #58A6FF; /* Accent Blue */
            box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.3);
        }
        /* Style for the button */
        #checkStatusButton {
            transition: background-color 0.2s, box-shadow 0.2s;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <!-- Main Content: Status Tracker Card -->
    <div class="w-full max-w-xl status-container p-6 sm:p-10 my-8">
        
        <!-- Header -->
        <h1 class="text-3xl font-bold text-text-light text-center mb-2">
            Application Status Check
        </h1>
        <p class="text-gray-400 text-center mb-8">
            Please enter your unique 8-digit Application ID.
        </p>

        <!-- Input Form -->
        <div class="flex space-x-3 mb-6">
            <input type="text" id="applicationIdInput" name="applicationId" required 
                   class="flex-grow rounded-lg px-4 py-3 text-lg uppercase tracking-wider" 
                   placeholder="E.g., UDYOG-1001" maxlength="10">
            
            <button id="checkStatusButton" type="button" onclick="checkStatus()"
                    class="flex-shrink-0 px-6 py-3 rounded-lg text-lg font-bold text-bg-darkest bg-accent-blue hover:bg-[#79bfff] focus:outline-none focus:ring-4 focus:ring-offset-2 focus:ring-accent-blue focus:ring-offset-bg-light">
                Check
            </button>
        </div>

        <!-- Status Message Area -->
        <p id="statusMessage" class="text-center text-sm font-medium text-gray-400 transition-colors duration-300 mb-6">
            Enter your Application ID above to check its current status.
        </p>

        <hr class="border-gray-700 mb-8">

        <!-- Results Display Area -->
        <div id="statusResult" class="min-h-[150px]">
            <!-- Results will be injected here by JavaScript -->
        </div>

    </div>

    <!-- Footer -->
    <footer class="text-center pb-4 text-gray-500">
        <p class="text-xs">&copy; 2025 UdyogSathi. All status updates are indicative and based on employer input.</p>
    </footer>

</body>
</html>
